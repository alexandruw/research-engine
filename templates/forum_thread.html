{% extends "project_base.html" %}


{% block p_head %}
  <link href="/css/forum_thread.css" rel="stylesheet" type="text/css" />

  <script type="text/javascript" src="/js/tinymce/jscripts/tiny_mce/tiny_mce.js"></script>
  <script type="text/javascript">
    tinyMCE.init({
    mode : "textareas",
    plugins : "equation,spellchecker,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",

    relative_urls : "false",
    document_base_url : "https://research-engine.appspot.com/",
    theme : "advanced",
    theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect",
    theme_advanced_buttons2 : "equation,cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
    theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
    theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,spellchecker,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,blockquote,pagebreak,|,insertfile,insertimage,equation",
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_statusbar_location : "bottom"
    });
  </script>

{% endblock %}


{% block title_bar_extra %}
/  <a href="/{{p_author.username}}/{{project.name}}/forum">Forum</a>
/  <a href="/{{p_author.username}}/{{project.name}}/forum/{{thread.key().id()}}">{{thread.title[0:30]}}...</a>
{% endblock %}


{% block p_content %}
 
<div class="thread">
  <div class="t-head">
    <div class="t-title">{{thread.title}}</div>
    <div class="t-date">{{thread.date.strftime("%d-%b-%Y")}}</div>
    <div class="t-author">by <a href="/{{thread.author.username}}">{{thread.author.username.capitalize()}}</a></div>
  </div>
  <div class="t-content">{{thread.content | safe}}</div>
</div>


{% for c in comments %}
<div class="t-comment">
  <div class="c-head">
    <div class="c-date">{{c.date.strftime("%d-%b-%Y")}}</div>
    <div class="c-author"><a href="/{{c.author.username}}">{{c.author.username.capitalize()}}</a></div>
  </div>
  <div class="c-comment">{{c.comment | safe}}</div>
</div>
{% endfor %}

<div class="comment-form">
  <form method="post">
    <textarea name="comment">{{comment_value}}</textarea>
    <input type="submit" value="Comment" />
  </form>
</div>

<div class="error">{{error_message}}</div>
{% endblock %}
