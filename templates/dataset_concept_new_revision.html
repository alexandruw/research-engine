{% extends "dataset_concept_base.html" %}


{% block p_head %}
<script type="text/javascript" src="/js/showdown.js"></script>
<script type="text/javascript" src="/js/preview.js"></script>
{% endblock %}

    
{% block dv_content %}

<form method="post" action="{{upload_url}}" enctype="multipart/form-data" role="form">
  <div class="form-group">
    <label for="descriptionText">Description of this revision</label>
    <textarea name="meta" id="descriptionText" onKeyUp="Preview('descriptionText','previewArea');" class="form-control" rows="10"
	      placeholder="Use this space to document information about the data file you are uploading. For example you could describe the experimental setup or the simulation parameters used." {% if disabled_p %}disabled{% endif %}>{{meta}}</textarea>
  </div>
  <div class="form-group {{fClass}}">
    <label for="datafile">Data file</label>
    <input type="file" name="file" id="datafile" class="form-control" {% if disabled_p %}disabled{% endif %}/>
  </div>
  <button type="submit" class="btn btn-success" id="upload-button" {% if disabled_p %}disabled{% endif %}>Upload revision</button>
  <button onClick="window.location = '/{{project.key.integer_id()}}/datasets/{{dataset.key.integer_id()}}/{{datac.key.integer_id()}}'"
	  type="button" class="btn btn-default">Cancel</button>
  {% if error_message %}<p class="text-danger">{{error_message}}</p>{% endif %}
  <div class="help-block"><p>Click <a href="/static/edit_help.html" target="_blank">here</a> to view some editing help (opens in a new window).</p></div>
</form>

<div>Below is a preview of how the page will be renderer when you save it. It may not be 100&#37; accurate but it should be close.</div>
<div class="panel panel-default">
  <div class="panel-body" id="previewArea">
    <em>Start typing above to see the preview here.<em>
  </div>
</div>
{% endblock %}
